<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="/static/favicon.png" />

	<script src="https://unpkg.com/htmx.org@1.9.12"
		integrity="sha384-ujb1lZYygJmzgSwoxRggbCHcjc0rB2XoQrxeTUQyRjrOnlCoYta87iKBWq3EsdM2"
		crossorigin="anonymous"></script>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
		rel="stylesheet">
	{% block head %}
	<link rel="stylesheet" href="{{ site_url }}/static/css/base.css" />
	<title>{% block title %}{% endblock title %} - olmonoko</title>
	{% block head_extra %}{% endblock head_extra %}
	{% endblock head %}
	<style>
		#main-nav {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 1rem;
		}

		#main-nav>.desktop-only>ul {
			display: flex;

			border: 1px solid var(--primary);
			border-radius: 0.25rem;
			background-color: var(--surface);
			overflow: hidden;

			&>li {
				display: contents;

				&>* {
					padding: .5em 1em;
				}

				&.active>* {
					background-color: var(--primary);
					color: var(--surface);
				}
			}
		}
	</style>
</head>

<body hx-boost="true" hx-indicator="this">
	<nav id="main-nav">
		<div id="nav-left">
			<section>
				<h1>OLMONOKO</h1>
				<p>{{ version }}</p>
			</section>
			<p id="anything-loading">...</p>
		</div>
		<div class="desktop-only">
			{% include "components/nav-content.html" %}
			{% include "components/auth/status.html" %}
		</div>
		<div class="mobile-only">
			{% include "components/mobile-menu.html" %}
		</div>
	</nav>
	<div id="loading-bar-{{ get_random(end=10000000) }}" class="loading-bar"></div>
	{% if flash %}
	<div id="flash" class="variant-{{ flash.level }}">{{ flash.message }}</div>
	{% endif %}
	{% block content_nav %}{% endblock content_nav %}
	<div id="slab">
		<main id="content">{% block content %}{% endblock content %}</main>
		<footer>
			{% block footer %}
			&copy; Copyright 2024 <a href="https://eliaseskelinen.fi" target="_blank">Elias Eskelinen</a>
			{% endblock footer %}
		</footer>
	</div>
	<!-- 100% privacy-first analytics -->
	<script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
	<noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript>
</body>

<style>
	#main-nav > #nav-left {
		display: flex;
		align-items: center;
		gap: 1rem;
	}

	#anything-loading {
		visibility: hidden;
	}

	.htmx-request #anything-loading, .htmx-request#anything-loading {
		visibility: visible;
	}

	.loading-bar {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 5px;
		background-color: var(--primary);
		transform: scaleX(0);
		transform-origin: left;
		transition: none;
	}

	.htmx-request .loading-bar, .htmx-request.loading-bar {
		transform: scaleX(1);
		transition: transform 5s cubic-bezier(.19,1,.22,1);
		transition-delay: 0.5s;
	}

	#slab {
		filter: none;
		opacity: 1;
		scale: 1;
		transition: none;
	}

	.htmx-request #slab, .htmx-request#slab {
		filter: grayscale(.7);
		opacity: 0.7;
		scale: 0.975;
		transition-property: filter, opacity, scale;
		transition-timing-function: cubic-bezier(.19,1,.22,1);
		transition-duration: 2s;
		transition-delay: 0.5s;
	}
</style>

</html>
