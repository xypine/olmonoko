{% set advanced_open = (filter.before is defined and filter.before != "") or (filter.after is defined and filter.after != "") or filter.tags != "" or filter.exclude_tags != "" %}
<details
	style="view-transition-name: event-filter;"
	{% if filter_set == true %}
		open
	{% endif %}
>
	<summary class="btn icon" title="Filter Events">
		{% if filter_set == true %}
			<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M11.77 19q-.33 0-.55-.22t-.22-.55v-5.576L5.604 5.83q-.202-.27-.055-.55t.47-.28h11.962q.323 0 .47.28q.147.282-.055.55L13 12.655v5.577q0 .328-.22.549t-.55.22z"/></svg>
		{% else %}
			<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M14.089 11.264L7.825 5h10.156q.317 0 .467.28t-.052.55zm5.744 9.99L13 14.42v3.81q0 .328-.22.549t-.55.22h-.46q-.33 0-.55-.22t-.22-.55V12.42L2.746 4.167l.708-.713l17.092 17.092z"/></svg>
		{% endif %}
	</summary>
	<form method="GET" action="{{ site_url }}{{ path }}" style="width: fit-content;">
		<fieldset>
			<legend>Filter Events</legend>
			<label>
				<span>
					Summary:
				</span>
				<input type="text" name="summary_like" value="{{ filter.summary_like }}">
			</label>
			<span>
				Priority
				<label>
					<span>
						Min:
					</span>
					<input type="number" name="min_priority" value="{{ filter.min_priority }}">
				</label>
				<label>
					<span>
						Max:
					</span>
					<input type="number" name="max_priority" value="{{ filter.max_priority }}">
				</label>
			</span>
			<details
				{% if advanced_open %}
					open
				{% endif %}
			>
				<summary>Advanced</summary>
				{% if filter.before is defined %}
					<label>
						<span>
							Before (unix timestamp):
						</span>
						<input type="number" name="before" value="{{ filter.before }}">
					</label>
				{% endif %}
				{% if filter.after is defined %}
					<label>
						<span>
							After (unix timestamp):
						</span>
						<input type="number" name="after" value="{{ filter.after }}">
					</label>
				{% endif %}
				<label>
					<span>
						Tags (comma separated):
					</span>
					<input type="text" name="tags" value="{{ filter.tags }}">
				</label>
				<label>
					<span>
						Exclude Tags (comma separated):
					</span>
					<input type="text" name="exclude_tags" value="{{ filter.exclude_tags }}">
				</label>
			</details>
			<button type="submit" class="btn">Filter</button>
		</fieldset>
	</form>
</details>
